## üìò Available in other languages:

üìò [Read English](README.md)

## Analyser transactions

(!–ê—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ Docker Compose)

–ú—É–ª—å—Ç–∏—Å–µ—Ä–≤–∏—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π. –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ (Docker conteiners) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º REST API (FastAPI), —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á (Celery), –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (Redis) –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (PostgreSQL). 

### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª: 
–ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –±–ª–æ–∫–æ–≤ –∏–ª–∏ —Å—Ä–µ–∑, –ø–æ –Ω–æ–º–µ—Ä—É –±–ª–æ–∫–∞, –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞. 
–°–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö. 
–§–∏–ª—å—Ç—Ä—É–µ—Ç –æ—Å—Ç–∞–≤–ª—è—è —Ç–æ–ª—å–∫–æ swap –¥–ª—è Uniswap V2, Uniswap V3. 
–î–µ–∫–æ–¥–∏—Ä—É–µ—Ç input. 
C–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤  –¥–∞–Ω–Ω—ã–µ –≤ Redis –∏ –≤ PostgreSQL (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç —Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (analyzer) –∏ —Ç–∞–±–ª–∏—Ü–µ–π (swap_txs)). 

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
–ü–æ–∑–≤–æ–ª—è–µ—Ç:
- –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ hash —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
- –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ –Ω–æ–º–µ—Ä—É –±–ª–æ–∫–∞.
- –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Å—Ç–∞—Ç—É—Å–µ –∑–∞–¥–∞–Ω–∏—è.
- –≤–µ—Ä–Ω—É—Ç—å –ø–µ—Ä–µ—á–µ–Ω—å –∑–∞–¥–∞–Ω–∏–π —Å –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —Ä–∞–±–æ—Ç—ã
- –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ Redis (–∫—ç—à–∞) –∏ PostgreSQL (–±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö) (–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏).

|| –í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è: –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (+1 –æ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö, —á—Ç–æ–± –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤).


## –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

- –†–∞–±–æ—Ç–∞–µ—Ç —Å **–Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –Ω–æ–¥–∞–º–∏** –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –º–µ–∂–¥—É –Ω–∏–º–∏, –∏ –≤—ã–¥–µ–ª—è–µ—Ç —Å–≤–æ–±–æ–¥–Ω—É—é –Ω–æ–¥—É –¥–ª—è —Ä–∞–±–æ—Ç—ã.

- –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å **–Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≤–æ—Ä–∫–µ—Ä–∞–º–∏** –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –º–µ–∂–¥—É –Ω–∏–º–∏, –∏ –≤—ã–¥–µ–ª—è–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã–π –≤–æ—Ä–∫–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã.

- –ü–æ–∑–≤–æ–ª—è–µ—Ç **–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ–ª–≥–æ–µ –æ–±—Ä–∞–±–æ—Ç–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ, —á—Ç–æ–±—ã –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å.

- –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å workers –≤ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ —Ä–∞–∑–Ω—ã—Ö –º–∞—à–∏–Ω–∞—Ö, —á—Ç–æ–±—ã —É–≤–µ–ª–∏—á–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π. 

- –í–æ—Ä–∫–µ—Ä—ã –æ–±–µ—Å–ø–µ—á–µ–Ω—ã –¥–æ—Å—Ç—É–ø–æ–º –∫ **Redis** –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –º–µ–∂–¥—É –Ω–∏–º–∏, –¥–∞–Ω–Ω—ã–º–∏ –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –Ω–æ–¥ –∞ —Ç–∞–∫–∂–µ –¥–∞–Ω–Ω—ã–º–∏ –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –≤–æ—Ä–∫–µ—Ä–æ–≤, –∏ –ø—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å TTL.

- –í –∫–∞—á–µ—Å–≤–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ **PostgreSQL** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö.

- –ü–∞—Ä—Å–∏—Ç **—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** —Å –ø–æ–º–æ—â—å—é **rpc** –æ–±—Ä–∞—â–∞—è—Å—å –∫ –Ω–æ–¥–∞–º.

- –í –±–∞–∑–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –ø–∞—Ä—Å–∏—Ç Swap —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ Uniswap V2 –∏ V3. –î–µ–∫–æ–¥–∏—Ä—É–µ—Ç input –∏—Å–ø–æ–ª—å–∑—É—è **abi**.

- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –¥–≤–∞ –±–∞–ª–∞–Ω—Å–∏—Ä–∞ –Ω–∞–≥—Ä—É–∑–∫–∏:
    - –ü–µ—Ä–≤—ã–π —Å–ª–æ–π (–∞–Ω–∞–ª–∏–∑): Celery —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –º–µ–∂–¥—É –Ω–æ–¥–∞–º–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—è –∑–∞–ø—Ä–æ—Å—ã, –∫—ç—à–∏—Ä—É—è –æ—Ç–≤–µ—Ç—ã –≤ Redis.
    - –í—Ç–æ—Ä–æ–π —Å–ª–æ–π (–∑–∞–ø—Ä–æ—Å—ã): Celery —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ, –∫—ç—à–∏—Ä—É—è –≤ Redis.


## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- [**Docker**](https://www.docker.com/) ‚Äî –∫–æ–Ω—Ç–µ–∏ÃÜ–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- [**FastAPI**](https://fastapi.tiangolo.com/) ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è REST API
- [**Celery**](https://docs.celeryq.dev/en/stable/) ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- [**Redis**](https://redis.io/) ‚Äî —Å–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π
- [**PostgreSQL**](https://www.postgresql.org/) ‚Äî —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- [**Flower**](https://flower.readthedocs.io/en/stable/) ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö Redis


## –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é `nginx` –∫–∞–∫ —Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

- –ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∑–∞ Nginx  
  –ü—É–±–ª–∏—á–Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –æ—Å—Ç–∞–Ω—É—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ—Ä—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, 80/443).

- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º  
  –ë—É–¥—É—Ç –∑–∞–∫—Ä—ã—Ç—ã –ø–æ—Ä—Ç—ã `5433`, `6380`, `8001`, `5556` –∏–∑–≤–Ω–µ ‚Äî –¥–æ—Å—Ç—É–ø –∫ –Ω–∏–º –±—É–¥–µ—Ç –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Nginx.

- –°–æ–∑–¥–∞–Ω–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–≥–æ compose-—Ñ–∞–π–ª–∞ `docker-compose.nginx.yml`  
  –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω-—Å—Ä–µ–¥, —Å –≤–∫–ª—é—á—ë–Ω–Ω—ã–º Nginx –∏ –æ—Ç–∫–ª—é—á—ë–Ω–Ω—ã–º–∏ –≤–Ω–µ—à–Ω–∏–º–∏ –ø–æ—Ä—Ç–∞–º–∏ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, –∫—Ä–æ–º–µ –Ω–µ–≥–æ.


## –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ [Docker](https://www.docker.com/) –∏ [Docker Compose](https://docs.docker.com/compose/install/).

2. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
    2.1. –°–æ–∑–¥–∞–µ–º –¥–µ—Ä–∏–∫—Ç–æ—Ä–∏—é –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
    * –° –æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞:

        ```bash 
        mkdir NewProject
        ```
    * –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞:

        ```bash
        cd NewProject
        ```

    * –°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

        For Linux/MacOS:

        ```bash
        python -m venv venv  # Create a virtual environment
        source venv/bin/activate  # Activate the environment
        ```
        For Windows:

        ```bash
        python -m venv venv  # Create a virtual environment
        venv\Scripts\activate  # Activate the environment
        ```

    2.2. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ÃÜ:

    ```bash
    git clone https://github.com/onium16/analyzer_swap_txs.git
    ```

3. –°–æ–∑–¥–∞–µ–º –¥–≤–∞ —Ñ–∞–π–ª–∞ .env –∏ docker/.env:
    .env:
    ```bash
        REDIS_URL=redis://localhost:6380/0
        CELERY_BROKER_URL=redis://localhost:6380/0
        CELERY_RESULT_BACKEND=redis://localhost:6380/0
        POSTGRES_USER=postgres
        POSTGRES_PASSWORD=postgres
        POSTGRES_DB=analyzer
        POSTGRES_TABLE_SWAP=swap_txs
        DATABASE_URL=postgresql+asyncpg://postgres:postgres@db:5433/analyzer
        LOG_LEVEL=DEBUG
        INFURA_KEY=test

    ```
    docker/.env:
    ```bash
        REDIS_URL=redis://redis:6379/0
        CELERY_BROKER_URL=redis://redis:6379/0
        CELERY_RESULT_BACKEND=redis://redis:6379/0
        POSTGRES_USER=postgres
        POSTGRES_PASSWORD=postgres
        POSTGRES_DB=analyzer
        POSTGRES_TABLE_SWAP=swap_txs
        DATABASE_URL=postgresql+asyncpg://postgres:postgres@db:5432/analyzer
        LOG_LEVEL=DEBUG
        INFURA_KEY=test

    ```

4. –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–∏ÃÜ–Ω–µ—Ä—ã:

    I. –≤–∞—Ä–∏–∞–Ω—Ç:
    4.1 –ü–µ—Ä–µ–∏ÃÜ–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–¥–Ω—É –∏–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∫–æ–º–∞–Ω–¥:

    ```bash
    make up      # –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
    make down    # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
    make logs    # –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
    make restart # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
    ```
    4.2. –ü–æ–¥–æ–∂–¥–∏—Ç–µ, –ø–æ–∫–∞ –∫–æ–Ω—Ç–µ–∏ÃÜ–Ω–µ—Ä—ã –±—É–¥—É—Ç –∑–∞–ø—É—â–µ–Ω—ã.

    ```bash
    docker ps -a
    ```
    
    –∏–ª–∏

    ```
    docker compose -f docker/docker_compose.yml -p test_pool ps
    ```

    II. –≤–∞—Ä–∏–∞–Ω—Ç:

    4.1. –ü–µ—Ä–µ–∏ÃÜ–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

    ```bash
    docker compose -f docker/docker_compose.yml -p test_pool up --build -d
    ```

    4.2. –ü–æ–¥–æ–∂–¥–∏—Ç–µ, –ø–æ–∫–∞ –∫–æ–Ω—Ç–µ–∏ÃÜ–Ω–µ—Ä—ã –±—É–¥—É—Ç –∑–∞–ø—É—â–µ–Ω—ã.

    ```bash
    docker ps -a
    ```
    
    –∏–ª–∏

    ```
    docker compose -f docker/docker_compose.yml -p test_pool ps
    ```

    example:

    ```
    CONTAINER ID   IMAGE                          COMMAND                   CREATED        STATUS                  PORTS                                                                                                                                                                                                            NAMES
    e2d5935bcf3a   test_pool-flower               "celery -A tasks.ana‚Ä¶"    11 hours ago   Up 11 hours             0.0.0.0:5556->5555/tcp, [::]:5556->5555/tcp                                                                                                                                                                      test_pool-flower-1
    042d044cff8c   test_pool-celery_worker        "celery -A tasks.ana‚Ä¶"    11 hours ago   Up 11 hours                                                                                                                                                                                                                              test_pool-celery_worker-1
    315c2dc185db   test_pool-api                  "uvicorn api.main:ap‚Ä¶"    11 hours ago   Up 11 hours             0.0.0.0:8001->8000/tcp, [::]:8001->8000/tcp                                                                                                                                                                      test_pool-api-1
    88b02d802ced   redis:6                        "docker-entrypoint.s‚Ä¶"    23 hours ago   Up 11 hours (healthy)   0.0.0.0:6380->6379/tcp, [::]:6380->6379/tcp                                                                                                                                                                      test_pool-redis-1
    d7d5a1b73f07   postgres:13                    "docker-entrypoint.s‚Ä¶"    23 hours ago   Up 11 hours (healthy)   0.0.0.0:5433->5432/tcp, [::]:5433->5432/tcp                                                                                                                                                                      test_pool-db-1

    ```

    4.3. –ü–µ—Ä–µ–∏ÃÜ–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

    ```docker compose -f docker/docker_compose.yml -p test_pool ps```

    4.4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –∫–æ–Ω—Ç–µ–∏ÃÜ–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã.
    
    ```docker compose -f docker/docker_compose.yml -p test_pool logs```


5. –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–æ–º –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è [FastAPI Docs](http://127.0.0.1:8001/docs).

6. –î–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã Celery + Redis –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è [Flower](http://127.0.0.1:5556).

7. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–æ–º –º–æ–∂–µ–º —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ç–æ–º–∞ –∏ –±–∏–ª–¥—ã, —Å–µ—Ç–∏ –∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

    ```docker compose -f docker/docker_compose.yml -p test_pool down --volumes --rmi all```

## –°–ø–∏—Å–æ–∫ –ø–æ—Ä—Ç–æ–≤:
```
    host: 127.0.0.1 or localhost

    SERVICE     PORT_CUSTOM     PORT_DEFAULT

    FastAPI:    8001            8000
    Celery:     -           
    Redis:      6380            6379
    PostgreSQL: 5433            5432
    Flower:     5556            5555
```
example:

```
http://localhost:8001
```
–ü—Ä–æ–≤–µ—Ä—å –∏–ª–∏ —Å–≤–æ–±–æ–¥–Ω—ã –ø–æ—Ä—Ç—ã [8001,6380,5433,5556]:

```
sudo lsof -i :8001
```

### Using

##### check redis status
```bash
redis-cli -h localhost -p 6380
```
```bash
redis-cli -h redis -p 6380 ping # return PONG
```

#### –ó–∞–ø—É—Å–∫ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ Swap —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö, –∞–Ω–∞–ª–∏–∑, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º –≥–ª—É–±–∏–Ω—ã –±–ª–æ–∫–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä: 2):
Requests to api:
```bash
curl -X 'POST' \
  'http://localhost:8001/analyze/blocks' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '{
  "depth_blocks": 1
}'
```

Return:
```json
{"task_id":"11e897b9-a5af-42a9-82ae-739c602b1473","status":"Task started"}
```


#### –ó–∞–ø—É—Å–∫ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ Swap —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö, –∞–Ω–∞–ª–∏–∑, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å—Ä–µ–∑–∞ –±–ª–æ–∫–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä: 22324710, 22324712):

Requests to api:
```bash
curl -X 'POST' \
  'http://localhost:8001/analyze/block-range' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '{
  "start_block": 22324710,
  "end_block": 22324712
}'
```
Return:
```json
{"task_id":"a8a1d944-fdc7-4896-9707-b876438d1567","status":"Task started"}
```

#### –ó–∞–ø—É—Å–∫ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ Swap —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ transaction hash:

Requests to api:
```bash
curl -X 'GET' \
  'http://localhost:8001/data/transaction/0x5bdc2ef4af09142f3999aa9e5af9384855fc5071cab1a4b6ba02dc48afa80b85' \
  -H 'accept: application/json'
```
Return:
```json
{"task_id":"a8a1d944-fdc7-4896-9707-b876438d1567","status":"Task started"}
```

#### –ó–∞–ø—É—Å–∫ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ Swap —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö, –∞–Ω–∞–ª–∏–∑, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å—Ä–µ–∑–∞ –±–ª–æ–∫–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä: 22324710, 22324712):

Requests to api:
```bash
curl -X 'POST' \
  'http://localhost:8001/analyze/block-range' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '{
  "start_block": 22324710,
  "end_block": 22324712
}'
```
Return:
```json
{
  "status": "completed",
  "transaction": {
    "tx_hash": "0x5bdc2ef4af09142f3999aa9e5af9384855fc5071cab1a4b6ba02dc48afa80b85",
    "block_number": 22328461,
    "decoded_input": {
      "method": "swapExactETHForTokens",
      "params": {
        "to": "0x03b7a339e9c2c36b2cf14a8cb7ebc522dd111e18",
        "path": [
          "0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",
          "0xe0805c80588913c1c2c89ea4a8dcf485d4038a3e"
        ],
        "deadline": 1745373207,
        "amountOutMin": 0
      }
    }
  }
}
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏:

Requests to api:
```bash
curl -X 'GET' \
  'http://localhost:8001/tasks/status/a288c77e-5cc4-47d1-a54a-c3230928d8da' \
  -H 'accept: application/json'
```
Return:
```json
{
  "task_id": "a288c77e-5cc4-47d1-a54a-c3230928d8da",
  "status": "completed",
  "result": {
    "status": "completed",
    "tx_hashes": [
      "0x5bdc2ef4af09142f3999aa9e5af9384855fc5071cab1a4b6ba02dc48afa80b85"
    ],
    "count": 1,
    "save_task_id": "0995768a-35e2-4b79-8cdd-3e31e7ac1a30"
  }
}
```
#### –í–µ—Ä–Ω—É—Ç—å —Å—Ä–µ–∑ –∑–∞–¥–∞—á:

Requests to api:
```bash
curl -X 'GET' \
  'http://localhost:8001/tasks/all?start=0&end=100' \
  -H 'accept: application/json'
```
Return:
```json
{ 
  "tasks": [
    {
      "task_id": "a288c77e-5cc4-47d1-a54a-c3230928d8da",
      "state": "SUCCESS",
      "status": "SUCCESS",
      "result": "{'status': 'completed', 'tx_hashes': ['0x5bdc2ef4af09142f3999aa9e5af9384855fc5071cab1a4b6ba02dc48afa80b85'], 'count': 1, 'save_task_id': '0995768a-35e2-4b79-8cdd-3e31e7ac1a30'}"
    },
    {
      "task_id": "c6742074-bf82-40e4-b926-b0638c7944e5",
      "state": "SUCCESS",
      "status": "SUCCESS",
      "result": "{'status': 'completed', 'tx_hashes': ['0x1c82d2d1b380e764ab3ab7df5b340a32078d76d5959a3d9d3b65ee9ac5fbc2a6', '0xa454eda9dded2a2d489963d6fa4c239f64c5162538567e7cfc2952dbc1386e1a', '0xa00308b09db138f301b8009356e62e238f5ef31e3b66f582496d8c52a2e8fce2', '0x45f8484aeb36d4e161baf35cdc8ad99a5ccdf2fb0d687650d960f21f3cd54805', '0x99a0f22e0ebc696df88ad44d66034b22f10b4a4a818d6d3eac2dde361ea0c1b1', '0xbf80d5d3e8a1ff46305727b7e6aa1878d81abb7f0c1fba082c5b00a5ccdaf3f3', '0xedaaf2ecf1ff4c1c3f4485fafdda38e4babc5ec1138cb513270408f8522b71c6'], 'count': 7, 'save_task_id': 'df52e028-c03e-44e7-aabe-acd72aaca8a0'}"
    }
  ]
}
```

#### –í–µ—Ä–Ω—É—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ Redis:

Requests to api:
```bash
curl -X 'GET' \
  'http://localhost:8001/tasks/health_redis' \
  -H 'accept: application/json'
```
Return:
```json
{
  "status": "healthy",
  "redis": "connected"
}
```

#### –í–µ—Ä–Ω—É—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ Analyzer Transactions:

Requests to api:
```bash
curl -X 'GET' \
  'http://localhost:8001/' \
  -H 'accept: application/json'
```
Return:
```json
{
  "message": "Transaction Analyzer API"
}
```

### Requirements

For manual mode or development  use requirements.txt
```bash
pip install -r tests/requirements.txt
```

### Official Documentation Links

For more details on how FastAPI works, visit:
[FastAPI Documentation](https://fastapi.tiangolo.com/)

For more details on how Docker works, visit:
[Docker Documentation](https://docs.docker.com/)

For more details on how Celery works, visit:
[Celery Documentation](https://docs.celeryq.dev/en/stable/)

For more details on how Redis works, visit:
[Redis Documentation](https://redis.io/)

For more details on how PostgreSQL works, visit:
[PostgreSQL Documentation](https://www.postgresql.org/)

For more details on how Flower works, visit:
[Flower Documentation](https://flower.readthedocs.io/en/stable/)

For more details on how uvicorn works, visit:
[uvicorn Documentation](https://www.starlette.io/uvicorn/)

For more details on how SQLAlchemy works, visit:
[SQLAlchemy Documentation](https://docs.sqlalchemy.org/en/14/index.html)

For more details on how Asyncio works, visit:
[Asyncio Documentation](https://docs.python.org/3/library/asyncio.html)

For more details on how asyncio works, visit:
[Asyncio Documentation](https://docs.python.org/3/library/asyncio.html)

For more details on how web3 works, visit:
[web3 Documentation](https://web3py.readthedocs.io/en/stable/index.html)

For more details on how pytest works, visit:
[pytest Documentation](https://docs.pytest.org/en/7.2.x/)

For more details on how Flashbots works, visit:  
[Flashbots Documentation](https://flashbots.net)

### This project

For more details on how Analyzer works, visit:
[Analyzer Transactions](https://github.com/onium16/analyzer_swap_txs.git)



### License

This project is open-source and can be freely used in any project. You are welcome to integrate and modify it as needed.  
Source code is available on GitHub: 
[Analyzer Transactions](https://github.com/onium16/analyzer_swap_txs.git)

---

author: SeriouS

email: onium16@gmail.com
